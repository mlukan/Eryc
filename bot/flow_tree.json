[{"id": "flow_donation_questionnaire", "steps": [{"id": "0_action_initiate", "next": "1_call_flow_authenticate_user", "metadata": {"line_numbers": "8-8"}, "action": "action_initiate"}, {"id": "1_call_flow_authenticate_user", "next": "2_utter_disclaimer", "metadata": {"line_numbers": "9-9"}, "call": "flow_authenticate_user"}, {"id": "2_utter_disclaimer", "next": "3_set_slots", "metadata": {"line_numbers": "10-10"}, "action": "utter_disclaimer"}, {"id": "3_set_slots", "next": "4_collect_slot_q1", "metadata": {"line_numbers": "11-12"}, "set_slots": [{"slot_squat": true}]}, {"id": "4_collect_slot_q1", "next": "5_collect_slot_q2", "metadata": {"line_numbers": "13-14"}, "collect": "slot_q1", "utter": "utter_ask_slot_q1", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "5_collect_slot_q2", "next": "6_collect_slot_q3", "metadata": {"line_numbers": "15-16"}, "collect": "slot_q2", "utter": "utter_ask_slot_q2", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "6_collect_slot_q3", "next": "7_collect_slot_q4", "metadata": {"line_numbers": "17-18"}, "collect": "slot_q3", "utter": "utter_ask_slot_q3", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "7_collect_slot_q4", "next": "8_collect_slot_q5", "metadata": {"line_numbers": "19-20"}, "collect": "slot_q4", "utter": "utter_ask_slot_q4", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "8_collect_slot_q5", "next": "9_collect_slot_q6", "metadata": {"line_numbers": "21-22"}, "collect": "slot_q5", "utter": "utter_ask_slot_q5", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "9_collect_slot_q6", "next": "10_collect_slot_q7", "metadata": {"line_numbers": "23-24"}, "collect": "slot_q6", "utter": "utter_ask_slot_q6", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "10_collect_slot_q7", "next": "11_collect_slot_q8", "metadata": {"line_numbers": "25-26"}, "collect": "slot_q7", "utter": "utter_ask_slot_q7", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "11_collect_slot_q8", "next": "12_collect_slot_q9_1", "metadata": {"line_numbers": "27-28"}, "collect": "slot_q8", "utter": "utter_ask_slot_q8", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "12_collect_slot_q9_1", "next": "13_collect_slot_q9_2", "metadata": {"line_numbers": "29-30"}, "collect": "slot_q9_1", "utter": "utter_ask_slot_q9_1", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "13_collect_slot_q9_2", "next": "14_collect_slot_q9_3", "metadata": {"line_numbers": "31-32"}, "collect": "slot_q9_2", "utter": "utter_ask_slot_q9_2", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "14_collect_slot_q9_3", "next": "15_collect_slot_q9_4", "metadata": {"line_numbers": "33-34"}, "collect": "slot_q9_3", "utter": "utter_ask_slot_q9_3", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "15_collect_slot_q9_4", "next": "16_collect_slot_q9_5", "metadata": {"line_numbers": "35-36"}, "collect": "slot_q9_4", "utter": "utter_ask_slot_q9_4", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "16_collect_slot_q9_5", "next": "17_collect_slot_q9_6", "metadata": {"line_numbers": "37-38"}, "collect": "slot_q9_5", "utter": "utter_ask_slot_q9_5", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "17_collect_slot_q9_6", "next": "18_collect_slot_q9_7", "metadata": {"line_numbers": "39-40"}, "collect": "slot_q9_6", "utter": "utter_ask_slot_q9_6", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "18_collect_slot_q9_7", "next": "19_collect_slot_q9_8", "metadata": {"line_numbers": "41-42"}, "collect": "slot_q9_7", "utter": "utter_ask_slot_q9_7", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "19_collect_slot_q9_8", "next": "20_collect_slot_q9_9", "metadata": {"line_numbers": "43-44"}, "collect": "slot_q9_8", "utter": "utter_ask_slot_q9_8", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "20_collect_slot_q9_9", "next": "21_collect_slot_q9_10", "metadata": {"line_numbers": "45-46"}, "collect": "slot_q9_9", "utter": "utter_ask_slot_q9_9", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "21_collect_slot_q9_10", "next": "22_collect_slot_q9_11", "metadata": {"line_numbers": "47-48"}, "collect": "slot_q9_10", "utter": "utter_ask_slot_q9_10", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "22_collect_slot_q9_11", "next": "23_collect_slot_q9_12", "metadata": {"line_numbers": "49-50"}, "collect": "slot_q9_11", "utter": "utter_ask_slot_q9_11", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "23_collect_slot_q9_12", "next": "24_collect_slot_q9_13", "metadata": {"line_numbers": "51-52"}, "collect": "slot_q9_12", "utter": "utter_ask_slot_q9_12", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "24_collect_slot_q9_13", "next": "25_collect_slot_q10", "metadata": {"line_numbers": "53-54"}, "collect": "slot_q9_13", "utter": "utter_ask_slot_q9_13", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "25_collect_slot_q10", "next": "26_collect_slot_q11", "metadata": {"line_numbers": "55-56"}, "collect": "slot_q10", "utter": "utter_ask_slot_q10", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "26_collect_slot_q11", "next": "27_collect_slot_q12", "metadata": {"line_numbers": "57-58"}, "collect": "slot_q11", "utter": "utter_ask_slot_q11", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "27_collect_slot_q12", "next": "28_collect_slot_q13_1", "metadata": {"line_numbers": "59-60"}, "collect": "slot_q12", "utter": "utter_ask_slot_q12", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "28_collect_slot_q13_1", "next": "29_collect_slot_q13_2", "metadata": {"line_numbers": "61-62"}, "collect": "slot_q13_1", "utter": "utter_ask_slot_q13_1", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "29_collect_slot_q13_2", "next": "30_collect_slot_q13_3", "metadata": {"line_numbers": "63-64"}, "collect": "slot_q13_2", "utter": "utter_ask_slot_q13_2", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "30_collect_slot_q13_3", "next": "31_collect_slot_q14", "metadata": {"line_numbers": "65-66"}, "collect": "slot_q13_3", "utter": "utter_ask_slot_q13_3", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "31_collect_slot_q14", "next": "32_collect_slot_q15", "metadata": {"line_numbers": "67-68"}, "collect": "slot_q14", "utter": "utter_ask_slot_q14", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "32_collect_slot_q15", "next": "33_collect_slot_q16_1", "metadata": {"line_numbers": "69-70"}, "collect": "slot_q15", "utter": "utter_ask_slot_q15", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "33_collect_slot_q16_1", "next": "34_collect_slot_q16_2", "metadata": {"line_numbers": "71-72"}, "collect": "slot_q16_1", "utter": "utter_ask_slot_q16_1", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "34_collect_slot_q16_2", "next": "35_collect_slot_q16_3", "metadata": {"line_numbers": "73-74"}, "collect": "slot_q16_2", "utter": "utter_ask_slot_q16_2", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "35_collect_slot_q16_3", "next": "36_collect_slot_q17", "metadata": {"line_numbers": "75-76"}, "collect": "slot_q16_3", "utter": "utter_ask_slot_q16_3", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "36_collect_slot_q17", "next": "37_collect_slot_q18", "metadata": {"line_numbers": "77-78"}, "collect": "slot_q17", "utter": "utter_ask_slot_q17", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "37_collect_slot_q18", "next": "38_collect_slot_q19_1", "metadata": {"line_numbers": "79-80"}, "collect": "slot_q18", "utter": "utter_ask_slot_q18", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "38_collect_slot_q19_1", "next": "39_collect_slot_q19_2", "metadata": {"line_numbers": "81-82"}, "collect": "slot_q19_1", "utter": "utter_ask_slot_q19_1", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "39_collect_slot_q19_2", "next": "40_collect_slot_q19_3", "metadata": {"line_numbers": "83-84"}, "collect": "slot_q19_2", "utter": "utter_ask_slot_q19_2", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "40_collect_slot_q19_3", "next": "41_collect_slot_q20", "metadata": {"line_numbers": "85-89"}, "collect": "slot_q19_3", "utter": "utter_ask_slot_q19_3", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": [{"if": "not (slots.slot_q19_3 matches \"^\\d{4}$\")", "utter": "utter_invalid_year_format"}]}, {"id": "41_collect_slot_q20", "next": "42_collect_slot_q21", "metadata": {"line_numbers": "90-91"}, "collect": "slot_q20", "utter": "utter_ask_slot_q20", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "42_collect_slot_q21", "next": "43_collect_slot_q22_1", "metadata": {"line_numbers": "92-93"}, "collect": "slot_q21", "utter": "utter_ask_slot_q21", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "43_collect_slot_q22_1", "next": "44_collect_slot_q22_2", "metadata": {"line_numbers": "94-95"}, "collect": "slot_q22_1", "utter": "utter_ask_slot_q22_1", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "44_collect_slot_q22_2", "next": "45_collect_slot_q22_3", "metadata": {"line_numbers": "96-97"}, "collect": "slot_q22_2", "utter": "utter_ask_slot_q22_2", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "45_collect_slot_q22_3", "next": "46_collect_slot_q23", "metadata": {"line_numbers": "98-99"}, "collect": "slot_q22_3", "utter": "utter_ask_slot_q22_3", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "46_collect_slot_q23", "next": [{"if": "slots.slot_user_gender = \"M\"", "then": "step_slot_q24"}, {"else": "step_slot_q25"}], "metadata": {"line_numbers": "100-105"}, "collect": "slot_q23", "utter": "utter_ask_slot_q23", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "step_slot_q24", "next": "step_slot_declaration", "metadata": {"line_numbers": "106-109"}, "collect": "slot_q24", "utter": "utter_ask_slot_q24", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "step_slot_q25", "next": "49_collect_slot_q26", "metadata": {"line_numbers": "110-112"}, "collect": "slot_q25", "utter": "utter_ask_slot_q25", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "49_collect_slot_q26", "next": "step_slot_declaration", "metadata": {"line_numbers": "113-114"}, "collect": "slot_q26", "utter": "utter_ask_slot_q26", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "step_slot_declaration", "next": [{"if": "slots.slot_declaration = \"yes\"", "then": "step_confirm_declaration"}, {"else": "step_reject_declaration"}], "metadata": {"line_numbers": "115-121"}, "collect": "slot_declaration", "utter": "utter_ask_slot_declaration", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "step_confirm_declaration", "next": "END", "metadata": {"line_numbers": "122-124"}, "action": "action_confirm_declaration"}, {"id": "step_reject_declaration", "next": "53_set_slots", "metadata": {"line_numbers": "125-126"}, "action": "utter_reject_declaration"}, {"id": "53_set_slots", "next": "END", "metadata": {"line_numbers": "127-131"}, "set_slots": [{"slot_squat": "None"}, {"slot_wants_to_register": false}, {"slot_start_questionnaire": false}]}], "description": "Flow to ask all blood donation questionnaire questions. Flow na z\u00edskanie v\u0161etk\u00fdch ot\u00e1zok z dotazn\u00edka pre darovanie krvi.", "file_path": "data/flow_donation_questionnaire.yaml", "persisted_slots": ["slot_wants_to_register", "slot_start_questionnaire"]}, {"id": "flow_search_faiss", "steps": [{"id": "0_action_initiate", "next": "1_action_search_faiss", "metadata": {"line_numbers": "5-5"}, "action": "action_initiate"}, {"id": "1_action_search_faiss", "next": "2_link_flow_feedback", "metadata": {"line_numbers": "6-6"}, "action": "action_search_faiss"}, {"id": "2_link_flow_feedback", "metadata": {"line_numbers": "7-8"}, "link": "flow_feedback"}], "description": "Trigger this flow, if the user asks anything related to blood donation, what is your name or what do you do. Do not start this flow, if the user asks anything related  to the booking a blood donation, cancelling a booking, past blood donations or free time slots. Spusti tento flow, ak sa pou\u017e\u00edvate\u013e sp\u00fdta na nie\u010do t\u00fdkaj\u00face sa darovania krvi, ak sa sp\u00fdta ako sa vol\u00e1\u0161, alebo \u010do rob\u00ed\u0161. Nesp\u00fa\u0161\u0165aj tento flow, ak sa pou\u017e\u00edvate\u013e sp\u00fdta na nie\u010do t\u00fdkaj\u00face sa rezerv\u00e1cie darovania krvi, zru\u0161enia rezerv\u00e1cie, minul\u00fdch darovan\u00ed krvi alebo dostupn\u00fdch term\u00ednov pre darovanie krvi.", "file_path": "data/flows.yml"}, {"id": "flow_feedback", "steps": [{"id": "0_action_initiate", "next": "1_collect_slot_feedback", "metadata": {"line_numbers": "15-15"}, "action": "action_initiate"}, {"id": "1_collect_slot_feedback", "next": [{"if": "slots.slot_feedback is \"pass\"", "then": "END"}, {"else": "step_ask_feedback"}], "description": "Ask the user for feedback. Sp\u00fdtaj sa pou\u017e\u00edvate\u013ea na jeho sp\u00e4tn\u00fa v\u00e4zbu.", "metadata": {"line_numbers": "16-23"}, "collect": "slot_feedback", "utter": "utter_ask_feedback", "ask_before_filling": true, "reset_after_flow_ends": true, "rejections": []}, {"id": "step_ask_feedback", "next": "END", "metadata": {"line_numbers": "24-27"}, "action": "action_collect_feedback"}], "description": "This flow allows user feedback collection.", "if": "False", "file_path": "data/flows.yml", "persisted_slots": ["slot_feedback"]}, {"id": "flow_book_donation_slot", "steps": [{"id": "0_action_initiate", "next": "1_call_flow_authenticate_user", "metadata": {"line_numbers": "34-34"}, "action": "action_initiate"}, {"id": "1_call_flow_authenticate_user", "next": [{"if": "slots.slot_user_email is not null and slots.slot_email_valid is true and slots.slot_access_code_valid is true", "then": "step_find_last_booking"}, {"else": "step_not_authenticated"}], "metadata": {"line_numbers": "35-39"}, "call": "flow_authenticate_user"}, {"id": "step_not_authenticated", "next": "END", "metadata": {"line_numbers": "40-42"}, "action": "utter_could_not_authenticate"}, {"id": "step_find_last_booking", "next": [{"if": "slots.slot_future_booking is null", "then": "step_ask_slot_location"}, {"else": "step_ask_rebook"}], "metadata": {"line_numbers": "43-48"}, "action": "action_find_last_booking"}, {"id": "step_ask_rebook", "next": [{"if": "slots.slot_rebook is true", "then": "step_call_rebook_location"}, {"else": "step_ask_slot_location"}], "description": "Ask the user if they want to rebook the last booking. Sp\u00fdtaj sa pou\u017e\u00edvate\u013ea, \u010di chce zmeni\u0165 posledn\u00fa rezerv\u00e1ciu.", "metadata": {"line_numbers": "49-56"}, "collect": "slot_rebook", "utter": "utter_ask_rebook", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "step_call_rebook_location", "next": "step_ask_slot_location", "metadata": {"line_numbers": "57-58"}, "call": "flow_cancel_booking"}, {"id": "step_ask_slot_location", "next": "7_action_check_location", "description": "Ask the user for the location of the blood donation center. Sp\u00fdtaj sa pou\u017e\u00edvate\u013ea na miesto centra na darovanie krvi.", "metadata": {"line_numbers": "59-61"}, "collect": "slot_location", "utter": "utter_ask_slot_location", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "7_action_check_location", "next": [{"if": "slots.slot_location_status = \"found\"", "then": "step_ask_slot_lookup_date"}, {"else": "step_let_choose_location"}], "metadata": {"line_numbers": "62-66"}, "action": "action_check_location"}, {"id": "step_let_choose_location", "next": "step_ask_slot_lookup_date", "description": "Ask the user to select the location of the blood donation center. Sp\u00fdtaj sa pou\u017e\u00edvate\u013ea, aby vybral miesto centra na darovanie krvi.", "metadata": {"line_numbers": "67-72"}, "collect": "slot_location_choice", "utter": "utter_ask_slot_location_choice", "ask_before_filling": true, "reset_after_flow_ends": true, "rejections": []}, {"id": "step_ask_slot_lookup_date", "next": "10_action_validate_elligibility", "description": "Ask the user for the date of the blood donation. Try to map the user message to the following values [today, tomorrow, this week, next week] or to the date formats MM-DD or DD.MM. E.g. 13.5. or 13.05. is the same as 05-13. Sp\u00fdtaj sa pou\u017e\u00edvate\u013ea na d\u00e1tum darovania krvi. Sk\u00fas namapova\u0165 spr\u00e1vu pou\u017e\u00edvate\u013ea na nasleduj\u00face hodnoty [today, tomorrow, this week, next week] alebo ak je zadan\u00fd d\u00e1tum, na form\u00e1t MM-DD alebo DD.MM. Napr. 13.5. alebo 13.05. je to ist\u00e9 ako 05-13.", "metadata": {"line_numbers": "73-76"}, "collect": "slot_lookup_date", "utter": "utter_ask_slot_lookup_date", "ask_before_filling": true, "reset_after_flow_ends": true, "rejections": []}, {"id": "10_action_validate_elligibility", "next": [{"if": "slots.slot_elligible_for_donation is true", "then": "step_ask_slot_booking_time"}, {"else": "step_ask_slot_lookup_date"}], "metadata": {"line_numbers": "77-81"}, "action": "action_validate_elligibility"}, {"id": "step_ask_slot_booking_time", "next": "12_action_book_slot", "description": "User specifies the booking time in unix minutes.", "metadata": {"line_numbers": "82-85"}, "collect": "slot_booking_time", "utter": "utter_ask_slot_booking_time", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "12_action_book_slot", "next": "13_collect_slot_start_questionnaire", "metadata": {"line_numbers": "86-86"}, "action": "action_book_slot"}, {"id": "13_collect_slot_start_questionnaire", "next": [{"if": "slots.slot_start_questionnaire is true", "then": "step_start_questionnaire"}, {"else": "END"}], "description": "Ask the user if they want to start the questionnaire. Sp\u00fdtaj sa pou\u017e\u00edvate\u013ea, \u010di chce za\u010da\u0165 s dotazn\u00edkom.", "metadata": {"line_numbers": "87-93"}, "collect": "slot_start_questionnaire", "utter": "utter_ask_start_questionnaire", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "step_start_questionnaire", "next": "END", "metadata": {"line_numbers": "94-98"}, "call": "flow_donation_questionnaire"}], "description": "Trigger this flow, if the user asks for  blood donation booking. Spusti tento flow, ak sa pou\u017e\u00edvate\u013e sp\u00fdta na rezerv\u00e1ciu  term\u00ednu pre darovanie krvi.", "file_path": "data/flows.yml", "persisted_slots": ["slot_user_email", "slot_access_code"]}, {"id": "flow_cancel_booking", "steps": [{"id": "0_action_initiate", "next": "1_call_flow_authenticate_user", "metadata": {"line_numbers": "105-105"}, "action": "action_initiate"}, {"id": "1_call_flow_authenticate_user", "next": [{"if": "slots.slot_user_email is not null and slots.slot_email_valid is true and slots.slot_access_code_valid is true", "then": "step_find_last_booking"}, {"else": "step_not_authenticated"}], "metadata": {"line_numbers": "106-110"}, "call": "flow_authenticate_user"}, {"id": "step_not_authenticated", "next": "END", "metadata": {"line_numbers": "111-113"}, "action": "utter_could_not_authenticate"}, {"id": "step_find_last_booking", "next": [{"if": "slots.slot_future_booking is not null", "then": "step_cancel_booking"}, {"else": "step_no_booking"}], "metadata": {"line_numbers": "114-119"}, "action": "action_find_last_booking"}, {"id": "step_no_booking", "next": "END", "metadata": {"line_numbers": "120-122"}, "action": "utter_no_booking"}, {"id": "step_cancel_booking", "next": "END", "metadata": {"line_numbers": "123-126"}, "action": "action_cancel_booking"}], "description": "Trigger this flow, if the user asks for cancelling or rebooking a blood donation booking. Spusti tento flow, ak sa pou\u017e\u00edvate\u013e sp\u00fdta na zru\u0161enie alebo zmenu rezerv\u00e1cie darovania krvi.", "file_path": "data/flows.yml", "persisted_slots": ["slot_user_email", "slot_access_code"]}, {"id": "flow_authenticate_user", "steps": [{"id": "0_noop", "next": [{"if": "slots.slot_user_email is not null and slots.slot_email_valid is true and slots.slot_access_code_valid is true", "then": "END"}, {"else": "step_ask_authenticate"}], "metadata": {"line_numbers": "131-135"}, "noop": true}, {"id": "step_ask_authenticate", "next": [{"if": "slots.slot_auth_agree is true", "then": "step_ask_slot_user_email"}, {"else": "END"}], "description": "Ask the user if they want to authenticate. Sp\u00fdtaj sa pou\u017e\u00edvate\u013ea, \u010di sa chce autentifikova\u0165.", "metadata": {"line_numbers": "136-143"}, "collect": "slot_auth_agree", "utter": "utter_ask_slot_auth_agree", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "step_ask_slot_user_email", "next": "3_action_validate_email", "description": "Ask the user for their email address. Sp\u00fdtaj sa pou\u017e\u00edvate\u013ea na jeho e-mailov\u00fa adresu.", "metadata": {"line_numbers": "144-149"}, "collect": "slot_user_email", "utter": "utter_ask_slot_user_email", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": [{"if": "not (slots.slot_user_email matches \"^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+$\")", "utter": "utter_invalid_email_format"}]}, {"id": "3_action_validate_email", "next": [{"if": "slots.slot_email_valid is true", "then": "step_validate_access_code"}, {"else": [{"id": "4_utter_invalid_email", "next": "step_slot_wants_to_register", "metadata": {"line_numbers": "155-156"}, "action": "utter_invalid_email"}]}], "metadata": {"line_numbers": "150-156"}, "action": "action_validate_email"}, {"id": "step_slot_wants_to_register", "next": [{"if": "slots.slot_wants_to_register is true", "then": "step_register_user"}, {"else": [{"id": "6_utter_message_must_register", "next": "END", "metadata": {"line_numbers": "165-166"}, "action": "utter_message_must_register"}]}], "description": "Ask the user if they want to register. Sp\u00fdtaj sa pou\u017e\u00edvate\u013ea, \u010di sa chce zaregistrova\u0165.", "metadata": {"line_numbers": "157-166"}, "collect": "slot_wants_to_register", "utter": "utter_ask_slot_wants_to_register", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "step_register_user", "next": "step_validate_access_code", "metadata": {"line_numbers": "167-168"}, "call": "flow_register_user"}, {"id": "step_validate_access_code", "next": [{"if": "slots.slot_access_code_valid is true", "then": "END"}, {"else": "step_send_access_code"}], "metadata": {"line_numbers": "169-174"}, "action": "action_validate_access_code"}, {"id": "step_send_access_code", "next": "step_get_access_code", "metadata": {"line_numbers": "175-176"}, "action": "action_send_access_code"}, {"id": "step_get_access_code", "next": "11_action_validate_access_code", "description": "Ask the user for the access code. Sp\u00fdtaj sa pou\u017e\u00edvate\u013ea na pr\u00edstupov\u00fd k\u00f3d.", "metadata": {"line_numbers": "177-179"}, "collect": "slot_access_code", "utter": "utter_ask_slot_access_code", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "11_action_validate_access_code", "next": [{"if": "slots.slot_access_code_valid is true", "then": "END"}, {"else": [{"id": "12_utter_incorrect_access_code", "next": "END", "metadata": {"line_numbers": "185-187"}, "action": "utter_incorrect_access_code"}]}], "metadata": {"line_numbers": "180-187"}, "action": "action_validate_access_code"}], "description": "Trigger this flow, if the user asks for authentication. Spusti tento flow, ak sa pou\u017e\u00edvate\u013e sp\u00fdta na autentifik\u00e1ciu.", "if": "False", "file_path": "data/flows.yml"}, {"id": "flow_register_user", "steps": [{"id": "step_ask_slot_user_email", "next": "1_collect_slot_user_name_and_surname", "description": "Ask the user for their email address. Sp\u00fdtaj sa pou\u017e\u00edvate\u013ea na jeho e-mailov\u00fa adresu.", "metadata": {"line_numbers": "192-198"}, "collect": "slot_user_email", "utter": "utter_ask_slot_user_email", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": [{"if": "not (slots.slot_user_email matches \"^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+$\")", "utter": "utter_invalid_email_format"}]}, {"id": "1_collect_slot_user_name_and_surname", "next": "2_collect_slot_user_phone", "description": "Ask the user for their name and surname. Sp\u00fdtaj sa pou\u017e\u00edvate\u013ea na jeho meno a priezvisko.", "metadata": {"line_numbers": "199-201"}, "collect": "slot_user_name_and_surname", "utter": "utter_ask_slot_user_name_and_surname", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "2_collect_slot_user_phone", "next": "3_collect_slot_user_address", "description": "Ask the user for their phone number. Sp\u00fdtaj sa pou\u017e\u00edvate\u013ea na jeho telef\u00f3nne \u010d\u00edslo.", "metadata": {"line_numbers": "202-207"}, "collect": "slot_user_phone", "utter": "utter_ask_slot_user_phone", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": [{"if": "not (slots.slot_user_phone matches \"^[0-9+\\-]+$\")", "utter": "utter_invalid_phone_number"}]}, {"id": "3_collect_slot_user_address", "next": "4_collect_slot_user_dob", "description": "Ask the user for their address. Sp\u00fdtaj sa pou\u017e\u00edvate\u013ea na jeho adresu.", "metadata": {"line_numbers": "208-211"}, "collect": "slot_user_address", "utter": "utter_ask_slot_user_address", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": []}, {"id": "4_collect_slot_user_dob", "next": "5_collect_slot_user_gender", "description": "Ask the user for their date of birth. Sp\u00fdtaj sa pou\u017e\u00edvate\u013ea na jeho d\u00e1tum narodenia.", "metadata": {"line_numbers": "212-217"}, "collect": "slot_user_dob", "utter": "utter_ask_slot_user_dob", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": [{"if": "not (slots.slot_user_dob matches \"^(0[1-9]|[12][0-9]|3[01])\\.(0[1-9]|1[0-2])\\.(19|20)\\d\\d$\")", "utter": "utter_invalid_dob_format"}]}, {"id": "5_collect_slot_user_gender", "next": "6_action_register_user", "description": "Ask the user for their gender. Sp\u00fdtaj sa pou\u017e\u00edvate\u013ea na jeho pohlavie", "metadata": {"line_numbers": "218-223"}, "collect": "slot_user_gender", "utter": "utter_ask_slot_user_gender", "ask_before_filling": false, "reset_after_flow_ends": true, "rejections": [{"if": "not \"{'M' 'F' '0'} contains slots.slot_user_gender\"", "utter": "utter_invalid_gender"}]}, {"id": "6_action_register_user", "next": "END", "metadata": {"line_numbers": "224-228"}, "action": "action_register_user"}], "description": "Trigger this flow, if the user wants to register. Spusti tento flow, ak sa pou\u017e\u00edvate\u013e chce zaregistrova\u0165.", "if": "False", "file_path": "data/flows.yml"}, {"id": "pattern_chitchat", "steps": [{"id": "0_action_initiate", "next": "1_utter_free_chitchat_response", "metadata": {"line_numbers": "6-6"}, "action": "action_initiate"}, {"id": "1_utter_free_chitchat_response", "next": "END", "metadata": {"line_numbers": "7-8"}, "action": "utter_free_chitchat_response"}], "name": "pattern chitchat", "description": "Conversation repair flow for off-topic interactions that won't disrupt the main conversation. should not respond to greetings or anything else for which there is a flow defined", "file_path": "data/patterns.yml"}, {"id": "pattern_search", "steps": [{"id": "0_action_initiate", "next": "1_action_search_faiss", "metadata": {"line_numbers": "13-13"}, "action": "action_initiate"}, {"id": "1_action_search_faiss", "next": "2_link_flow_feedback", "metadata": {"line_numbers": "14-14"}, "action": "action_search_faiss"}, {"id": "2_link_flow_feedback", "metadata": {"line_numbers": "15-18"}, "link": "flow_feedback"}], "name": "pattern search", "description": "Flow for handling knowledge-based questions", "file_path": "data/patterns.yml"}, {"id": "pattern_cancel_flow", "steps": [{"id": "0_action_cancel_flow", "next": "END", "metadata": {"line_numbers": "23-24"}, "action": "action_cancel_flow"}], "name": "pattern_cancel_flow", "description": "Conversation repair flow that starts when a flow is cancelled", "file_path": "data/patterns.yml"}, {"id": "pattern_cannot_handle", "steps": [{"id": "0_noop", "next": [{"if": "'{{context.reason}}' = 'cannot_handle_chitchat'", "then": [{"id": "1_utter_cannot_handle", "next": "END", "metadata": {"line_numbers": "35-37"}, "action": "utter_cannot_handle"}]}, {"if": "'{{context.reason}}' = 'cannot_handle_not_supported'", "then": [{"id": "2_utter_cannot_handle", "next": "END", "metadata": {"line_numbers": "40-42"}, "action": "utter_cannot_handle"}]}, {"else": [{"id": "3_utter_ask_rephrase", "next": "END", "metadata": {"line_numbers": "44-46"}, "action": "utter_ask_rephrase"}]}], "metadata": {"line_numbers": "30-46"}, "noop": true}], "name": "pattern cannot handle", "description": "Conversation repair flow for addressing failed command generation scenarios\n", "file_path": "data/patterns.yml"}, {"id": "pattern_clarification", "steps": [{"id": "0_action_clarify_flows", "next": "1_utter_clarification_options_rasa", "metadata": {"line_numbers": "51-51"}, "action": "action_clarify_flows"}, {"id": "1_utter_clarification_options_rasa", "next": "END", "metadata": {"line_numbers": "52-53"}, "action": "utter_clarification_options_rasa"}], "name": "pattern clarification", "description": "Conversation repair flow for handling ambiguous requests that could match multiple flows", "file_path": "data/patterns.yml"}, {"id": "pattern_code_change", "steps": [{"id": "0_action_clean_stack", "next": "END", "metadata": {"line_numbers": "58-59"}, "action": "action_clean_stack"}], "name": "pattern code change", "description": "Conversation repair flow for cleaning the stack after an assistant update", "file_path": "data/patterns.yml"}, {"id": "pattern_collect_information", "steps": [{"id": "start", "next": "1_validate_{{context.collect}}", "metadata": {"line_numbers": "64-65"}, "action": "action_run_slot_rejections"}, {"id": "1_validate_{{context.collect}}", "next": [{"if": "slots.{{context.collect}} is not null", "then": "END"}, {"else": "ask_collect"}], "metadata": {"line_numbers": "66-70"}, "action": "validate_{{context.collect}}"}, {"id": "ask_collect", "next": "3_{{context.collect_action}}", "metadata": {"line_numbers": "71-72"}, "action": "{{context.utter}}"}, {"id": "3_{{context.collect_action}}", "next": "4_action_listen", "metadata": {"line_numbers": "73-73"}, "action": "{{context.collect_action}}"}, {"id": "4_action_listen", "next": "start", "metadata": {"line_numbers": "74-76"}, "action": "action_listen"}], "name": "pattern collect information", "description": "Flow for collecting information from users", "file_path": "data/patterns.yml"}, {"id": "pattern_completed", "steps": [{"id": "0_utter_can_do_something_else", "next": "END", "metadata": {"line_numbers": "81-82"}, "action": "utter_can_do_something_else"}], "name": "pattern completed", "description": "Flow that asks if the user needs more help after completing their initiated use cases", "file_path": "data/patterns.yml"}, {"id": "pattern_continue_interrupted", "steps": [{"id": "0_utter_flow_continue_interrupted", "next": "END", "metadata": {"line_numbers": "87-88"}, "action": "utter_flow_continue_interrupted"}], "name": "pattern continue interrupted", "description": "Conversation repair flow for managing when users switch between different flows", "file_path": "data/patterns.yml"}, {"id": "pattern_correction", "steps": [{"id": "0_action_correct_flow_slot", "next": "END", "metadata": {"line_numbers": "93-100"}, "action": "action_correct_flow_slot"}], "name": "pattern correction", "description": "Conversation repair flow for managing user input changes or error corrections", "file_path": "data/patterns.yml"}, {"id": "pattern_human_handoff", "steps": [{"id": "0_utter_human_handoff_not_available", "next": "END", "metadata": {"line_numbers": "105-106"}, "action": "utter_human_handoff_not_available"}], "name": "pattern human handoff", "description": "Conversation repair flow for switching users to a human agent if their request can't be handled", "file_path": "data/patterns.yml"}, {"id": "pattern_internal_error", "steps": [{"id": "0_noop", "next": [{"if": "'{{context.error_type}}' = 'rasa_internal_error_user_input_too_long'", "then": [{"id": "1_utter_user_input_too_long_error_rasa", "next": "END", "metadata": {"line_numbers": "115-116"}, "action": "utter_user_input_too_long_error_rasa"}]}, {"if": "'{{context.error_type}}' = 'rasa_internal_error_user_input_empty'", "then": [{"id": "2_utter_user_input_empty_error_rasa", "next": "END", "metadata": {"line_numbers": "119-120"}, "action": "utter_user_input_empty_error_rasa"}]}, {"else": [{"id": "3_utter_internal_error_rasa", "next": "END", "metadata": {"line_numbers": "122-124"}, "action": "utter_internal_error_rasa"}]}], "metadata": {"line_numbers": "111-124"}, "noop": true}], "name": "pattern internal error", "description": "Conversation repair flow for informing users about internal errors", "file_path": "data/patterns.yml"}, {"id": "pattern_repeat_bot_messages", "steps": [{"id": "0_action_repeat_bot_messages", "next": "END", "metadata": {"line_numbers": "129-130"}, "action": "action_repeat_bot_messages"}], "name": "pattern repeat bot messages", "description": "Voice conversation repair pattern to repeat bot messages", "file_path": "data/patterns.yml"}, {"id": "pattern_restart", "steps": [{"id": "0_action_restart", "next": "END", "metadata": {"line_numbers": "137-138"}, "action": "action_restart"}], "name": "pattern restart", "description": "Flow for restarting the conversation", "nlu_trigger": [{"intent": {"name": "restart", "confidence_threshold": 0.0}}], "file_path": "data/patterns.yml"}, {"id": "pattern_session_start", "steps": [{"id": "0_utter_session_start", "next": "END", "metadata": {"line_numbers": "145-146"}, "action": "utter_session_start"}], "name": "pattern session start", "description": "Flow for starting the conversation", "nlu_trigger": [{"intent": {"name": "session_start", "confidence_threshold": 0.0}}], "file_path": "data/patterns.yml"}, {"id": "pattern_skip_question", "steps": [{"id": "0_utter_skip_question_answer", "next": "END", "metadata": {"line_numbers": "151-152"}, "action": "utter_skip_question_answer"}], "name": "pattern skip question", "description": "Conversation repair flow for managing user intents to skip questions (steps)", "file_path": "data/patterns.yml"}, {"id": "pattern_user_silence", "steps": [{"id": "0_noop", "next": [{"if": "slots.consecutive_silence_timeouts = 0.0", "then": [{"id": "1_set_slots", "next": "2_action_repeat_bot_messages", "metadata": {"line_numbers": "165-166"}, "set_slots": [{"consecutive_silence_timeouts": 1.0}]}, {"id": "2_action_repeat_bot_messages", "next": "END", "metadata": {"line_numbers": "167-168"}, "action": "action_repeat_bot_messages"}]}, {"if": "slots.consecutive_silence_timeouts = 1.0", "then": [{"id": "3_set_slots", "next": "4_utter_ask_still_there", "metadata": {"line_numbers": "171-172"}, "set_slots": [{"consecutive_silence_timeouts": 2.0}]}, {"id": "4_utter_ask_still_there", "next": "END", "metadata": {"line_numbers": "173-174"}, "action": "utter_ask_still_there"}]}, {"if": "slots.consecutive_silence_timeouts > 1.0", "then": [{"id": "5_utter_inform_hangup", "next": "6_action_hangup", "metadata": {"line_numbers": "177-177"}, "action": "utter_inform_hangup"}, {"id": "6_action_hangup", "next": "END", "metadata": {"line_numbers": "178-179"}, "action": "action_hangup"}]}, {"else": "END"}], "metadata": {"line_numbers": "161-182"}, "noop": true}], "name": "pattern react to silence", "description": "Reacting to user silence in voice bots", "nlu_trigger": [{"intent": {"name": "silence_timeout", "confidence_threshold": 0.0}}], "file_path": "data/patterns.yml", "persisted_slots": ["consecutive_silence_timeouts"]}]